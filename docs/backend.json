
{
  "entities": {
    "User": {
      "title": "User",
      "type": "object",
      "description": "Represents a user of the StudyParadox application.",
      "properties": {
        "id": { "type": "string" },
        "email": { "type": "string", "format": "email" },
        "displayName": { "type": "string" },
        "username": { "type": "string", "description": "Unique student handle." },
        "photoUrl": { "type": "string", "format": "uri" },
        "aboutMe": { "type": "string", "description": "A short bio about the student." },
        "pronouns": { "type": "string", "description": "User's preferred pronouns." },
        "country": { "type": "string", "description": "User's country or region." }
      },
      "required": ["id", "email", "displayName", "username"]
    },
    "Room": {
      "title": "Room",
      "type": "object",
      "description": "A study room for collaboration.",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "topic": { "type": "string" },
        "creatorId": { "type": "string" },
        "creatorName": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" },
        "password": { "type": "string", "description": "Optional password for private entry." },
        "maxParticipants": { "type": "number", "default": 10 }
      },
      "required": ["id", "name", "topic", "creatorId"]
    },
    "Participant": {
      "title": "Participant",
      "type": "object",
      "description": "A user currently in a room.",
      "properties": {
        "userId": { "type": "string" },
        "name": { "type": "string" },
        "username": { "type": "string" },
        "photoUrl": { "type": "string" },
        "isMuted": { "type": "boolean" },
        "isCameraOff": { "type": "boolean" },
        "joinedAt": { "type": "string", "format": "date-time" }
      },
      "required": ["userId", "name"]
    },
    "Message": {
      "title": "Message",
      "type": "object",
      "description": "A chat message within a room.",
      "properties": {
        "id": { "type": "string" },
        "text": { "type": "string" },
        "senderId": { "type": "string" },
        "senderName": { "type": "string" },
        "senderUsername": { "type": "string" },
        "timestamp": { "type": "string", "format": "date-time" }
      },
      "required": ["text", "senderId", "senderName"]
    },
    "FriendRequest": {
      "title": "FriendRequest",
      "type": "object",
      "description": "A request to connect with another user.",
      "properties": {
        "senderId": { "type": "string" },
        "senderName": { "type": "string" },
        "senderUsername": { "type": "string" },
        "senderPhoto": { "type": "string" },
        "receiverId": { "type": "string" },
        "receiverName": { "type": "string" },
        "receiverUsername": { "type": "string" },
        "receiverPhoto": { "type": "string" },
        "status": { "type": "string", "enum": ["pending", "accepted", "declined"] },
        "timestamp": { "type": "string", "format": "date-time" }
      },
      "required": ["senderId", "receiverId", "status"]
    },
    "DirectChat": {
      "title": "DirectChat",
      "type": "object",
      "description": "A private 1-on-1 chat.",
      "properties": {
        "id": { "type": "string" },
        "participantIds": { "type": "array", "items": { "type": "string" } },
        "lastMessage": { "type": "string" },
        "updatedAt": { "type": "string", "format": "date-time" }
      },
      "required": ["participantIds"]
    },
    "Task": {
      "title": "Task",
      "type": "object",
      "description": "A student task/todo item.",
      "properties": {
        "id": { "type": "string" },
        "text": { "type": "string" },
        "completed": { "type": "boolean", "default": false },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["text", "completed"]
    }
  },
  "auth": {
    "providers": ["google"]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": "#/backend/entities/User",
      "description": "User profiles."
    },
    "/users/{userId}/tasks/{taskId}": {
      "schema": "#/backend/entities/Task",
      "description": "User specific to-do tasks."
    },
    "/usernames/{username}": {
      "schema": { "type": "object", "properties": { "userId": { "type": "string" } } },
      "description": "Registry for unique usernames."
    },
    "/rooms/{roomId}": {
      "schema": "#/backend/entities/Room",
      "description": "Publicly accessible study rooms."
    },
    "/rooms/{roomId}/participants/{participantId}": {
      "schema": "#/backend/entities/Participant",
      "description": "Active participants in a room."
    },
    "/rooms/{roomId}/messages/{messageId}": {
      "schema": "#/backend/entities/Message",
      "description": "Real-time chat messages."
    },
    "/friendRequests/{requestId}": {
      "schema": "#/backend/entities/FriendRequest",
      "description": "Friend requests between users."
    },
    "/directChats/{chatId}": {
      "schema": "#/backend/entities/DirectChat",
      "description": "Private 1-on-1 chats."
    },
    "/directChats/{chatId}/messages/{messageId}": {
      "schema": "#/backend/entities/Message",
      "description": "Private messages."
    }
  }
}
